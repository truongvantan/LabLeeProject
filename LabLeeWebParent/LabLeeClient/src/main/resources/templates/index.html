<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments :: page_head('Home', 'none')}" />
<body>
	<section th:replace="~{fragments::header}"></section>
	<h1 class="text-center mt-5">[[${SITE_LAB_NAME_DETAILS}]] - [[${CONTACT_NAME_UNIVERSITY}]]</h1>

	<!-- ================================== Statistical ==========================================================  -->
	<div
		class="my-5 py-5"
		style="background-color: #5e9cea;"
	>
		<div class="text-center text-white fs-3 fw-bold mb-5">Welcome to [[${SITE_LAB_NAME}]]</div>
		<div class="container">
			<div class="row justify-content-center text-center">

				<div class="col-12 col-lg-4 mb-4 mb-lg-0">
					<div
						class="fw-bold display-4 text-white mb-3"
						id="member-count"
					>[[${numberOfMembers}]]</div>
					<div class="fs-5 text-white fw-bold">Members</div>
				</div>

				<div class="col-12 col-lg-4 mb-4 mb-lg-0">
					<div
						class="fw-bold display-4 text-white mb-3"
						id="publication-count"
					>[[${numberOfPublications}]]</div>
					<div class="fs-5 text-white fw-bold">Publications</div>
				</div>

				<div class="col-12 col-lg-4">
					<div
						class="fw-bold display-4 text-white mb-3"
						id="project-count"
					>[[${numberOfProjects}]]</div>
					<div class="fs-5 text-white fw-bold">Projects</div>
				</div>

			</div>
		</div>
	</div>
	<!-- ================================== END Statistical ==========================================================  -->

	<!-- ================================== Latest Project ==========================================================  -->
	<section
		id="center"
		class="p_3 center_h bg-white"
	>
		<div class="container-xl">
			<div class="row center_h1">
				<div class="col-md-5">
					<div class="center_h1l position-relative">
						<div class="center_h1l1">
							<div class="grid clearfix">
								<figure class="effect-jazz mb-0">
									<a th:href="@{'/projects/details/' + ${latestProject.id}}">
										<img
											th:src="@{${latestProject.thumbnailPath}}"
											class="w-100"
											alt="Latest Project Thumbnail"
										>
									</a>
								</figure>
							</div>
						</div>
						<div class="center_h1l2 bg_back p-4 position-absolute top-0 w-100">
							<h2 class="mb-0 fw-normal text-white text-center">[[${latestProject.shortTitle}]]</h2>
						</div>
					</div>
				</div>
				<div class="col-md-7">
					<div class="center_h1r p-2 px-4">
						<h1 class="font_50">Latest our research</h1>
						<hr class="line mt-4 mb-4">
						<div class="mb-0 fs-5">
							<div
								th:utext="${latestProject.projectAbstract}"
								class="p-limit-5"
							></div>
							<a
								class="fw-bold text-header-color-common"
								th:href="@{'/projects/details/' + ${latestProject.id}}"
							>Read more</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- ================================== END Latest Project ==========================================================  -->

	<!-- ================================== List Member ==========================================================  -->
	<div class="container my-5">

		<h2 class="fw-bold text-center h1">Our Members</h2>
		<div class="d-flex justify-content-center align-items-center mb-2">
			<a
				th:href="@{/members}"
				class="fw-bold text-header-color-common text-center"
			>View all</a>
			<i class="fa-solid fa-circle-chevron-right col_blue ms-1"></i>
		</div>

		<!-- VIEWPORT -->
		<div class="slider-viewport">

			<!-- SLIDER -->
			<div
				id="memberSlider"
				class="d-flex slider-track"
			>

				<!-- CARD -->
				<div
					class="slider-item"
					th:each="memberProfile : ${listMembers}"
				>
					<div class="card h-100 shadow-sm">

						<!-- IMAGE -->
						<div class="card-img-wrapper image-hover-scale">
							<a th:href="@{'/members/details/' + ${memberProfile.id}}">
								<img
									th:src="@{${memberProfile.avatarPath}}"
									alt="member-photo"
									class="img-uniform"
								>
							</a>
						</div>

						<!-- BODY -->
						<div class="card-body text-center">
							<h6 class="card-title mb-1 fw-bold h5">[[${memberProfile.fullName}]]</h6>
							<p class="mb-1">[[${memberProfile.academicRank}]]</p>
							<p class="card-text fst-italic">([[${memberProfile.displayPeriod}]])</p>
							<a
								th:href="@{'/members/details/' + ${memberProfile.id}}"
								class="fw-bold text-header-color-common"
							> Details </a>
						</div>

					</div>
				</div>
				<!-- /CARD -->

			</div>
		</div>
		<div class="mt-2 d-flex justify-content-center">
			<div>
				<button
					id="prevBtn"
					class="btn btn-outline-primary btn-sm me-2"
				>‹</button>
				<button
					id="nextBtn"
					class="btn btn-outline-primary btn-sm"
				>›</button>
			</div>
		</div>
	</div>
	<!-- ================================== END List Member ==========================================================  -->

	<!-- ================================== List Publications ==========================================================  -->
	<section
		id="blog_h"
		class="p_3 bg-white"
	>
		<div class="container-xl">
			<div class="row blog_h1">
				<div class="col-md-9">
					<div class="blog_h1l">
						<div class="blog_h1l1 row">
							<div class="col-md-6 col-6">
								<div class="blog_h1l1l">
									<h4 class="mb-0">Publications</h4>
								</div>
							</div>
							<div class="col-md-6 col-6">
								<div class="blog_h1l1r text-end mt-1">
									<h6 class="mb-0">
										<a th:href="@{/publications}">
											View All
											<i class="fa fa-chevron-circle-right col_blue ms-1"></i>
										</a>
									</h6>
								</div>
							</div>
						</div>
						<hr>
						<th:block th:each="publication: ${list3LatestPublications}">
							<div class="blog_h1l2 row mt-4">
								<div class="col-md-4">
									<div class="blog_h1l2l">
										<div class="grid clearfix">
											<figure class="effect-jazz mb-0">
												<a th:href="${publication.doiLink}">
													<img
														th:src="@{${publication.thumbnailPath}}"
														height="170"
														alt="abc"
													>
												</a>
											</figure>
										</div>
									</div>
								</div>
								<div class="col-md-8">
									<div class="blog_h1l2r">
										<h5 class="mt-3">
											<a th:href="${publication.doiLink}">[[${publication.title}]]</a>
										</h5>
										<div
											th:utext="${publication.publicationAbstract}"
											class="p-limit-2"
										></div>
										<h6 class="mb-0 font_14 mt-2">
											<a
												class="button_1 pt-2 pb-2"
												th:href="${publication.doiLink}"
											>View Details </a>
										</h6>
									</div>
								</div>
							</div>
						</th:block>



						<div class="blog_h1l1 row mt-4">
							<div class="col-md-6 col-6">
								<div class="blog_h1l1l">
									<h4 class="mb-0">News</h4>
								</div>
							</div>
							<div class="col-md-6 col-6">
								<div class="blog_h1l1r text-end mt-1">
									<h6>
										<a th:href="@{/news}">
											View All
											<i class="fa fa-chevron-circle-right col_blue ms-1"></i>
										</a>
									</h6>
								</div>
							</div>
						</div>
						<hr>
						<div class="row mt-4">
							<th:block th:each="news : ${list4LatestNews}">
								<div class="col-md-3">
									<figure class="effect-jazz mb-0">
										<a th:href="@{'/news/details/' + ${news.id}}">
											<img
												th:src="@{${news.thumbnailPath}}"
												class="w-100"
												height="200"
												alt="abc"
											>
										</a>
									</figure>
									<h6 class="font_14 mt-3">
										<span>
											<i class="fa fa-calendar col_blue me-1"></i>
											<span th:text="${#temporals.format(news.updateAt, 'yyyy-MM-dd HH:mm:ss')}"></span>
										</span>
									</h6>
									<div style="height: 50px;">
										<h5 class="fs-6 mt-3 p-limit-3">
											<a th:href="@{'/news/details/' + ${news.id}}">[[${news.title}]]</a>
										</h5>
									</div>
									<div
										class="font_14 p-limit-3"
										th:utext="${news.shortDescription}"
									></div>
									<div class="mt-2">
										<a
											class="button_1 pt-2 pb-2"
											th:href="@{'/news/details/' + ${news.id}}"
										>Read More </a>
									</div>
								</div>
							</th:block>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- ================================== END List Publications ==========================================================  -->

	<section th:replace="~{fragments::footer}"></section>

	<script th:inline="javascript">
	/*<![CDATA[*/
		var numberOfMembers = /*[[${numberOfMembers}]]*/ '1';
		var numberOfPublications = /*[[${numberOfPublications}]]*/ '1';
		var numberOfProjects = /*[[${numberOfProjects}]]*/ '1';
	/*]]>*/
	</script>

	<script type="text/javascript">
		function animateNumber(finalNumber, duration = 5000, startNumber = 0, callback) {
		    let currentNumber = startNumber;
		    const interval = window.setInterval(updateNumber, 17);
		    function updateNumber() {
		        if (currentNumber >= finalNumber) {
		            clearInterval(interval);
		        } else {
		            let inc = Math.ceil(finalNumber / (duration / 17));
		            if (currentNumber + inc > finalNumber) {
		                currentNumber = finalNumber;
		                clearInterval(interval);
		            } else {
		                currentNumber += inc;
		            }
		            callback(currentNumber);
		        }
		    }
		}
		
		$(document).ready(function() {
			animateNumber(numberOfMembers, 5000, 0, function (number) {
		        const formattedNumber = number.toLocaleString();
		        document.getElementById('member-count').innerText = formattedNumber;
		    });
		
		    animateNumber(numberOfPublications, 5000, 0, function (number) {
		        const formattedNumber = number.toLocaleString();
		        document.getElementById('publication-count').innerText = formattedNumber;
		    });
		
		    animateNumber(numberOfProjects, 5000, 0, function (number) {
		        const formattedNumber = number.toLocaleString();
		        document.getElementById('project-count').innerText = formattedNumber;
		    });
		
		});
    </script>

	<script type="text/javascript">
		$(document).ready(function () {
		    const $slider = $('#memberSlider');
		    const $items = $('.slider-item');
		
		    let currentIndex = 0;
		
		    function getVisibleCards() {
		        if (window.innerWidth <= 576) return 1;
		        if (window.innerWidth <= 992) return 2;
		        return 5;
		    }
		
		    function updateSlider() {
		        const itemWidth = $items.outerWidth(true);
		        const translateX = -currentIndex * itemWidth;
		        $slider.css('transform', `translateX(${translateX}px)`);
		
		        updateButtons();
		    }
		
		    function updateButtons() {
		        const visibleCards = getVisibleCards();
		        const maxIndex = $items.length - visibleCards;
		
		        $('#prevBtn').prop('disabled', currentIndex <= 0);
		        $('#nextBtn').prop('disabled', currentIndex >= maxIndex);
		    }
		
		    $('#nextBtn').click(function () {
		        const visibleCards = getVisibleCards();
		        const maxIndex = $items.length - visibleCards;
		
		        if (currentIndex < maxIndex) {
		            currentIndex++;
		            updateSlider();
		        }
		    });
		
		    $('#prevBtn').click(function () {
		        if (currentIndex > 0) {
		            currentIndex--;
		            updateSlider();
		        }
		    });
		
		    $(window).on('resize', function () {
		        currentIndex = 0;
		        updateSlider();
		    });
		
		    updateSlider();
		});
	</script>

</body>
</html>